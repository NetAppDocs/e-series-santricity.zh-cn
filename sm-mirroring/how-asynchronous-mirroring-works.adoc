---
permalink: sm-mirroring/how-asynchronous-mirroring-works.html 
sidebar: sidebar 
keywords: SANtricity, System Manager, E-Series, asynchronous, mirroring, 
summary: 异步镜像可按需或按计划复制数据卷、从而最大限度地减少或避免因数据损坏或丢失而导致的停机时间。 
---
= 异步镜像的工作原理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
异步镜像可按需或按计划复制数据卷、从而最大限度地减少或避免因数据损坏或丢失而导致的停机时间。

[NOTE]
====
在EF600或EF300存储阵列上不能使用镜像。

====
异步镜像可捕获主卷在特定时间点的状态、并仅复制自上次映像捕获以来发生更改的数据。可以立即更新主站点、并在带宽允许的情况下更新二级站点。此信息将在网络资源可用时进行缓存并稍后发送。

这种类型的镜像最适合满足无中断操作的需求、而且通常对于备份和归档等定期过程来说、网络效率更高。使用异步镜像的原因如下：

* 远程备份整合。
* 防止发生本地或广域灾难。
* 在实时数据的时间点映像上进行应用程序开发和测试。




== 异步镜像会话

异步镜像可捕获主卷在特定时间点的状态、并仅复制自上次映像捕获以来发生更改的数据。通过异步镜像、可以立即更新主站点、并在带宽允许的情况下更新二级站点。此信息将在网络资源可用时进行缓存并稍后发送。

活动异步镜像会话有四个主要步骤。

image::../media/sam-1130-dwg-async-mirroring-session.gif[SAM 1130 dwg异步镜像会话]

. 首先在主卷的存储阵列上执行写入操作。
. 操作的状态将返回给主机。
. 系统会记录并跟踪主卷上的所有更改。
. 所有更改都会作为后台进程发送到二级卷的存储阵列。


这些步骤会根据定义的同步间隔重复、如果未定义任何间隔、也可以手动重复这些步骤。

异步镜像只会按设定的时间间隔将数据传输到远程站点、因此本地I/O不会受到网络连接速度较慢的影响。由于此传输与本地I/O无关、因此不会影响应用程序性能。因此、异步镜像可以使用iSCSI等速度较慢的连接、并在本地和远程存储系统之间运行较长的距离。

存储阵列的最低固件版本必须为7.84。(它们可以分别运行不同的操作系统版本。)



== 镜像一致性组和镜像对

您可以创建镜像一致性组、以便在本地存储阵列和远程存储阵列之间建立镜像关系。异步镜像关系由一个镜像对组成：一个存储阵列上的主卷和另一个存储阵列上的二级卷。

包含主卷的存储阵列通常位于主站点、并为活动主机提供服务。包含二级卷的存储阵列通常位于二级站点、并保存数据的副本。二级卷通常包含数据的备份副本、用于灾难恢复。



== 同步设置

创建镜像对时、还需要定义同步优先级和重新同步策略、镜像对使用该策略在通信中断后完成重新同步操作。

创建镜像一致性组时、还可以为组中的所有镜像对定义同步优先级和重新同步策略。镜像对使用同步优先级和重新同步策略在通信中断后完成重新同步操作。

如果主卷的存储阵列无法向二级卷写入数据、则镜像对中的主卷和二级卷可能会变得不同步。此情况可能由以下问题引起：

* 本地和远程存储阵列之间的网络问题。
* 二级卷发生故障。
* 正在镜像对上手动暂停同步。
* 镜像组角色冲突。


您可以手动或自动同步远程存储阵列上的数据。



== 预留容量和异步镜像

预留容量用于跟踪未进行同步时主卷与二级卷之间的差异。它还会跟踪每个镜像对的同步统计信息。

镜像对中的每个卷都需要自己的预留容量。



== 配置和管理

要在两个阵列之间启用和配置镜像、必须使用Unified Manager界面。启用镜像后、您可以在System Manager中管理镜像对和同步设置。
